{"version":3,"file":"router.js","sources":["../router/src/utils.js","../router/src/ldod-router.js","../router/src/nav-to.js","../router/src/nav-to-new.js","../router/src/router.js"],"sourcesContent":["/** @format */\n\nexport const PATH_PATTERN = /^\\/[^/]*/;\nexport const isSlash = path => path === '/';\n\nexport const addSlashes = path => addStartSlash(addEndSlash(path));\n\nexport const addStartSlash = path => {\n\tif (!path || !path.trim()) return;\n\treturn path.startsWith('/') ? path : `/${path}`;\n};\n\nexport const addEndSlash = path => {\n\tif (!path || !path.trim()) return;\n\treturn path.endsWith('/') ? path : `${path}/`;\n};\n\nexport const removeEndSlash = path => {\n\tif (!path || !path.trim()) return;\n\treturn isSlash(path) || !path.endsWith('/') ? path : path.substring(0, path.length - 1);\n};\n\nexport const removeStartSlash = path => {\n\tif (!path || !path.trim()) return;\n\treturn isSlash(path) || !path.startsWith('/') ? path : path.substring(1);\n};\n\nexport const removeSlashes = path => removeStartSlash(removeEndSlash(path));\n","/** @format */\n\nimport { ldodEventPublisher, ldodEventSubscriber } from './events-module';\nimport { addEndSlash, addStartSlash, isSlash, PATH_PATTERN, removeEndSlash } from './utils';\nexport default class LdodRouter extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.routes = {};\n\t\tthis.shadow && this.attachShadow({ mode: 'open' });\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tget shadow() {\n\t\treturn this.hasAttribute('shadow');\n\t}\n\n\tget self() {\n\t\treturn this.shadow ? this.shadowRoot : this;\n\t}\n\n\tget location() {\n\t\treturn removeEndSlash(location.pathname);\n\t}\n\n\tget route() {\n\t\treturn addStartSlash(removeEndSlash(this.getAttribute('route'))) || '';\n\t}\n\n\tget base() {\n\t\treturn addStartSlash(removeEndSlash(this.getAttribute('base'))) || '';\n\t}\n\n\tget routerPathname() {\n\t\treturn removeEndSlash(`/${this.base}${this.route}`)?.replace(/\\/\\/+/g, '/');\n\t}\n\n\tget outlet() {\n\t\tlet outlet = this.self.querySelector('ldod-outlet');\n\t\tif (!outlet) outlet = document.createElement('ldod-outlet');\n\t\toutlet.id = `${this.id}-outlet`;\n\t\treturn outlet;\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tset language(language) {\n\t\tthis.setAttribute('language', language);\n\t}\n\n\tgetFullPath = path => removeEndSlash(`/${this.base}/${path ?? ''}`.replace(/\\/\\/+/g, '/'));\n\n\tnormalizePath = pathname =>\n\t\tisSlash(this.routerPathname)\n\t\t\t? pathname\n\t\t\t: addEndSlash(pathname).replace(`${this.routerPathname}/`, '/').replace(/\\/\\/+/g, '/');\n\n\tisPathActive = path => {\n\t\tif (!this.active) return false;\n\t\tlet target = PATH_PATTERN.exec(this.normalizePath(path)).at(0);\n\t\tlet current = removeEndSlash(this.normalizePath(this.active.path));\n\t\treturn current === target;\n\t};\n\n\tisFromThisRouter = path => {\n\t\tif (!this.route) return true;\n\t\tconst target = this.base ? path.replace(this.base, '') : path;\n\t\treturn target.startsWith(this.route);\n\t};\n\n\tasync connectedCallback() {\n\t\tthis.addEventListeners();\n\t\tif (!this.id) throw new Error('Each router must have an unique ID');\n\t\tthis.self.append(this.outlet);\n\t\tthis.processRoutes();\n\t}\n\n\tprocessRoutes(routes = this.routes) {\n\t\tthis.routes = Object.entries(routes).reduce((prev, [key, api]) => {\n\t\t\tlet path = removeEndSlash(`/${this.base}/${this.route}/${key}`.replace(/\\/\\/+/g, '/'));\n\t\t\tprev[path] = api;\n\t\t\treturn prev;\n\t\t}, {});\n\t\tthis.navigate();\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tif (name === 'language' && oldV && oldV !== newV) this.handleLanguageChange(newV);\n\t}\n\n\thandleLanguageChange(language) {\n\t\tthis.self\n\t\t\t.querySelectorAll('[language]')\n\t\t\t.forEach(ele => ele.setAttribute('language', language));\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.unsubURL();\n\t\twindow.removeEventListener('popstate', this.handlePopstate);\n\t}\n\n\taddEventListeners() {\n\t\tthis.unsubURL = ldodEventSubscriber('url-changed', this.handleURLChanged);\n\t\twindow.addEventListener('popstate', this.handlePopstate);\n\t}\n\n\tnavigate = (path = this.location, state = {}) => {\n\t\tif (this.isPathActive(path)) return;\n\t\tif (this.location !== path) history.pushState(state, undefined, path);\n\t\tthis.render();\n\t};\n\n\thandleURLChanged = ({ payload: { path, state } }) => {\n\t\tif (path && this.isFromThisRouter(path)) this.navigate(this.getFullPath(path), state);\n\t};\n\n\thandlePopstate = () => this.isFromThisRouter(this.location) && this.navigate(this.location);\n\n\tasync render() {\n\t\tlet route = await this.getRoute();\n\t\tldodEventPublisher('loading', true);\n\t\tawait this.appendMFE(route);\n\t\tldodEventPublisher('loading', false);\n\t}\n\n\tisARouteMatch = path => {\n\t\tconst pathSplit = path.split('/');\n\t\tconst locationSplit = this.location.split('/');\n\t\treturn pathSplit.every((subpath, index) =>\n\t\t\t!subpath.startsWith(':') ? locationSplit[index] === subpath : true\n\t\t);\n\t};\n\n\tasync getRoute() {\n\t\tlet targetPath =\n\t\t\tthis.location === this.routerPathname\n\t\t\t\t? this.index\n\t\t\t\t: Object.entries(this.routes)\n\t\t\t\t\t\t.filter(([path, api]) => this.isARouteMatch(path) && api)\n\t\t\t\t\t\t.sort(([pathA], [pathB]) => {\n\t\t\t\t\t\t\tconst locationLength = this.location.split('/').length;\n\t\t\t\t\t\t\tconst pathAlength = pathA?.split('/').length;\n\t\t\t\t\t\t\tconst pathBlength = pathB?.split('/').length;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t+(pathBlength === locationLength) -\n\t\t\t\t\t\t\t\t+(pathAlength === locationLength)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})[0]?.[1] ?? this.fallback;\n\t\tif (typeof targetPath === 'function') this.updateRoutingParameters(await targetPath());\n\t\treturn targetPath;\n\t}\n\n\tupdateRoutingParameters = api => {\n\t\tconst subPaths = api.path.split('/');\n\t\tconst newState = subPaths.reduce(\n\t\t\t(state, subPath, index) => {\n\t\t\t\tif (subPath.startsWith(':')) {\n\t\t\t\t\tconst key = subPath.replace(':', '');\n\t\t\t\t\tconst value = addStartSlash(\n\t\t\t\t\t\tthis.location.replace(this.routerPathname, '')\n\t\t\t\t\t).split('/')[index];\n\t\t\t\t\treturn { ...state, [key]: value };\n\t\t\t\t}\n\t\t\t\treturn state;\n\t\t\t},\n\t\t\t{ ...history.state }\n\t\t);\n\t\tif (newState) history.replaceState(newState, '');\n\t};\n\n\tasync appendMFE(route) {\n\t\tif (!route) return;\n\t\tthis.active && (await this.removeMFE());\n\t\tthis.active = await route();\n\t\tawait this.active.mount(this.language, `#${this.outlet.id}`);\n\t}\n\n\tasync removeMFE() {\n\t\tawait this.active?.unMount();\n\t\tthis.outlet.innerHTML = '';\n\t}\n}\n\ncustomElements.define('ldod-router', LdodRouter);\n","/** @format */\n\nimport { ldodEventPublisher } from './events-module';\n\nexport default class NavTo extends HTMLAnchorElement {\n\tget to() {\n\t\tconst toAttr = this.getAttribute('to');\n\t\treturn typeof toAttr === 'string' ? toAttr.trim() : '';\n\t}\n\n\tget mfePath() {\n\t\treturn this.to === '/' ? this.to : this.to?.split('/')[1];\n\t}\n\n\tget hasTo() {\n\t\treturn this.hasAttribute('to');\n\t}\n\n\tget hasContent() {\n\t\treturn this.hasAttribute('content');\n\t}\n\n\tget publishedMfes() {\n\t\treturn [...(window.mfes ?? []), '/'];\n\t}\n\n\tconnectedCallback() {\n\t\tthis.checkIfMfesIsPublished();\n\t\tif (this.target) {\n\t\t\tthis.href = this.to;\n\t\t\treturn;\n\t\t}\n\t\tthis.addEventListener('click', this.onclick);\n\t}\n\n\tonclick(e) {\n\t\te.preventDefault();\n\t\tthis.emitURLEvent();\n\t}\n\n\temitURLEvent() {\n\t\tif (!this.to) return;\n\t\tldodEventPublisher('url-changed', { path: this.to });\n\t}\n\n\tcheckIfMfesIsPublished = () => {\n\t\tif (this.target || !this.hasTo) return;\n\t\tif (!this.publishedMfes.includes(this.mfePath)) {\n\t\t\tif (this.hasContent) return this.setAttribute('to', '');\n\t\t\tthis.style.display = 'none';\n\t\t}\n\t};\n}\n\ncustomElements.define('nav-to', NavTo, { extends: 'a' });\n","/** @format */\n\nimport { ldodEventPublisher } from './events-module';\n\nexport default class NavToNew extends HTMLAnchorElement {\n\tget to() {\n\t\tconst toAttr = this.getAttribute('to');\n\t\treturn typeof toAttr === 'string' ? toAttr.trim() : '';\n\t}\n\n\tget mfePath() {\n\t\treturn this.to === '/' ? this.to : this.to?.split('/')[1];\n\t}\n\n\tget hasTo() {\n\t\treturn this.hasAttribute('to');\n\t}\n\n\tget hasContent() {\n\t\treturn this.hasAttribute('content');\n\t}\n\n\tget publishedMfes() {\n\t\treturn [...(window.mfes ?? []), '/'];\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['to'];\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.attributeChanged[name](oldV, newV);\n\t}\n\n\tattributeChanged = {\n\t\tto: () => !this.target && this.hasTo && this.interceptBehavior(),\n\t};\n\n\tconnectedCallback() {\n\t\tif (this.href) return;\n\t\tif (!this.target && this.hasTo) this.interceptBehavior();\n\t\tif (this.target) {\n\t\t\tthis.handleMfePublishState();\n\t\t\tif (this.hasTo) this.href = `/ldod-mfes${this.to}`;\n\t\t}\n\t}\n\n\tinterceptBehavior = () => {\n\t\tthis.handleMfePublishState();\n\t\tthis.addEventListener('click', this.onclick);\n\t};\n\n\thandleMfePublishState = () => {\n\t\tif (this.isMfePublished()) return;\n\t\tthis.hasContent ? this.removeToAttr() : this.hide();\n\t};\n\n\tonclick(e) {\n\t\te.preventDefault();\n\t\tthis.emitURLEvent();\n\t}\n\n\temitURLEvent() {\n\t\tif (!this.to) return;\n\t\tldodEventPublisher('url-changed', { path: this.to });\n\t}\n\n\tisMfePublished = () => this.publishedMfes.includes(this.mfePath);\n\thide = () => {\n\t\tthis.style.display = 'none';\n\t};\n\tremoveToAttr = () => this.removeAttribute('to');\n}\n\ncustomElements.define('nav-to-new', NavToNew, { extends: 'a' });\n","/** @format */\n\nimport { ldodEventPublisher } from './events-module.js';\nimport './ldod-router.js';\nimport './nav-to.js';\nimport './nav-to-new.js';\n\nexport const navigateTo = (path, state) => {\n\tldodEventPublisher('url-changed', { path, state });\n};\n"],"names":["PATH_PATTERN","isSlash","path","addStartSlash","trim","startsWith","removeEndSlash","endsWith","substring","length","LdodRouter","HTMLElement","constructor","super","this","routes","shadow","attachShadow","mode","observedAttributes","hasAttribute","self","shadowRoot","location","pathname","route","getAttribute","base","routerPathname","replace","outlet","querySelector","document","createElement","id","language","setAttribute","getFullPath","normalizePath","addEndSlash","isPathActive","active","target","exec","at","isFromThisRouter","async","addEventListeners","Error","append","processRoutes","Object","entries","reduce","prev","key","api","navigate","attributeChangedCallback","name","oldV","newV","handleLanguageChange","querySelectorAll","forEach","ele","disconnectedCallback","unsubURL","window","removeEventListener","handlePopstate","ldodEventSubscriber","handleURLChanged","addEventListener","state","history","pushState","undefined","render","payload","getRoute","ldodEventPublisher","appendMFE","isARouteMatch","pathSplit","split","locationSplit","every","subpath","index","targetPath","filter","sort","pathA","pathB","locationLength","pathAlength","pathBlength","fallback","updateRoutingParameters","newState","subPath","value","replaceState","removeMFE","mount","unMount","innerHTML","customElements","define","NavTo","HTMLAnchorElement","to","toAttr","mfePath","hasTo","hasContent","publishedMfes","mfes","connectedCallback","checkIfMfesIsPublished","href","onclick","e","preventDefault","emitURLEvent","includes","style","display","extends","NavToNew","attributeChanged","interceptBehavior","handleMfePublishState","isMfePublished","removeToAttr","hide","removeAttribute","navigateTo"],"mappings":"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"}