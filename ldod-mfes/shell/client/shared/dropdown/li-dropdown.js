import{h as t,c as e,a as s}from"./header-data-schema-e896e6c3.js";import{ldodValidator as n}from"@shared/ldod-events.js";let a;class r extends HTMLLIElement{constructor(){super()}get key(){return this.getAttribute("key")}get language(){return this.getAttribute("language")}get show(){return this.hasAttribute("show")}get constants(){return this.data.constants}static get observedAttributes(){return["show","language","data-headers"]}attributeChangedCallback(t,e,s){this.handleChangedAttribute[t](e,s)}handleChangedAttribute={show:()=>{this.toggler.classList.toggle("show",this.show),this.menu.classList.toggle("show",this.show)},language:(t,e)=>{!this.data||!t||t===e||this.querySelectorAll("[data-dropdown-key]").forEach((t=>{t.textContent=this.constants[this.language][t.dataset.dropdownKey]||t.dataset.dropdownKey}))},"data-headers":(e,s)=>{s&&(this.data=JSON.parse(s)),this.removeAttribute("data-headers"),(e=>{const s=n.validate(e,t).errors;return!s.length||(s.forEach((t=>console.error(t))),!1)})(this.data)&&this.render()}};connectedCallback(){this.render()}render=async()=>{this.data&&(this.innerHTML||(this.innerHTML=e(this.data,this.language)),this.toggler=this.querySelector("a.dropdown-toggle"),this.menu=this.querySelector("ul.dropdown-menu"),this.externalLinks=this.menu.querySelector("div#external-links"),this.addEventListeners())};addEventListeners=()=>{window.addEventListener("pointermove",this.loadDropdownModule,{once:!0}),this.toggler.addEventListener("click",(t=>{t.stopPropagation(),this.dispatchEvent(new PointerEvent("click",{bubbles:!0,composed:!0}))}))};onNewLink=({payload:t})=>{if(!t)return;const{replace:e=!1,name:n,data:a,constants:r}=t;if(n!==this.key)return;Object.entries(r||{}).reduce(((t,[e,s])=>(t[e]={...t[e],...s},t)),this.constants);const o=`\n\t\t\t${a.pages.reduce(((t,e)=>t+s(e,this.language,this.constants)),"")}\n\t\t`;e?this.replaceExternalLinks(o):this.addMenuLinks(o)};replaceExternalLinks=t=>{this.externalLinks.innerHTML=t};addMenuLinks=t=>{const e=document.createElement("template");e.innerHTML=t,[...e.content.cloneNode(!0).children].forEach((t=>{this.externalLinks.insertAdjacentElement("beforebegin",t)}))};loadDropdownModule=async()=>{await(async()=>{a||(a=(await import("@shared/bootstrap/dropdown.js")).default)})(),this.dropdown=new a(this.querySelector(".dropdown-toggle"))}}customElements.define("drop-down",r,{extends:"li"});export{r as DropDown};
//# sourceMappingURL=li-dropdown.js.map
