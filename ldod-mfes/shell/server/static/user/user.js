import{createElement as e,createFragment as t}from"shared/vanilla-jsx.js";var n={pt:{login:"Iniciar Sessão",password:"Alterar Senha",logout:"Sair"},en:{login:"Login",password:"Change Password",logout:"Logout"},es:{login:"Iniciar Sesión",password:"Cambiar la contraseña",logout:"Cerrar"}};window.html=String.raw;class s extends HTMLLIElement{constructor(){super()}get language(){return this.getAttribute("language")??"en"}set language(e){this.setAttribute("language",e)}get token(){return this.getAttribute("token")??"false"}set token(e){this.setAttribute("token",e)}get master(){return this.hasAttribute("master")}static get observedAttributes(){return["language","token"]}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){t&&n&&t!==n&&("token"===e&&this.updateComponent(),"language"===e&&this.updateLanguage(n))}disconnectedCallback(){this.removeAnchors()}removeAnchors(){this.querySelectorAll("a").forEach((e=>e.removeEventListener("click",this.handlers(e.id).handler))),this.innerHTML=""}render(){"true"===this.token?this.appendChild(e(t,null,e("a",{id:"login",class:"dropdown-toggle"},"João Raimundo",e("span",{class:"caret"})),e("ul",{class:"dropdown-menu"},e("li",null,e("a",{class:"update-language",id:"logout"})),e("li",null,e("a",{class:"update-language",id:"password"}))))):this.appendChild(e("a",{id:"login",class:"login update-language"})),this.listeners(),this.updateLanguage(),this.userLoginEvent()}updateComponent(){this.removeAnchors(),this.render()}listeners(){["logout","password","login"].forEach((e=>this.querySelector(`#${this.handlers(e).id}`)?.addEventListener("click",this.handlers(e).handler)))}updateLanguage(e=this.language){this.querySelectorAll("a.update-language").forEach((t=>t.innerHTML=n[e][t.id]))}userLoginEvent(e=this.token){if(this.master){const t={token:e,user:"true"===e?{name:"João Raimundo",admin:!1}:void 0};this.getRootNode().dispatchEvent(new CustomEvent("ldod-user-event",{detail:t}))}}handlers(e){const t=()=>this.getRootNode().querySelectorAll("li#user-component");return{login:{id:"login",handler:()=>t().forEach((e=>e.setAttribute("token","true")))},logout:{id:"logout",handler:()=>t().forEach((e=>e.setAttribute("token","false")))},password:{id:"password",handler:()=>console.log("password changed")}}[e]}}!customElements.get("user-component")&&customElements.define("user-component",s,{extends:"li"});
