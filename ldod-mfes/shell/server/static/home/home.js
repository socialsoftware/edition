import"shared/router.js";import{parseHTML as n}from"shared/utils.js";const e=n=>-1!==window.mfes?.indexOf(n)&&!0;var t={about:e("about")&&{name:"header_about",pages:[{id:"header_title",route:"/about/archive"},{id:"header_videos",route:"/about/videos"},{id:"header_tutorials",route:"/about/tutorials"},{id:"header_faq",route:"/about/faq"},{id:"header_encoding",route:"/about/encoding"},{id:"header_bibliography",route:"/about/articles"},{id:"header_book",route:"/about/book"},{id:"header_conduct",route:"/about/conduct"},{id:"header_privacy",route:"/about/privacy"},{id:"header_team",route:"/about/team"},{id:"header_acknowledgements",route:"/about/acknowledgements"},{id:"header_contact",route:"/about/contact"},{id:"header_copyright",route:"/about/copyright"}]},reading:(e("social")||e("reading")||e("ldod-visual"))&&{name:"general_reading",pages:[e("reading")&&{id:"general_reading_sequences",route:"/reading"},e("ldod-visual")&&{id:"general_reading_visual",link:`${process.host}/ldod-visual`},e("social")&&{id:"general_citations_twitter",route:"/reading/citations"}]},documents:e("text")&&{name:"header_documents",pages:[{id:"authorial_source",route:"/documents/source/list"},{id:"fragment_codified",route:"/documents/fragments"}]},editions:(e("virtual")||e("text"))&&{name:"header_editions",pages:[]},search:e("search")&&{name:"header_search",pages:[{id:"header_search_simple",route:"/search/simple"},{id:"header_search_advanced",route:"/search/advanced"}]},virtual:(e("virtual")||e("classification-game"))&&{name:"header_virtual",pages:[e("virtual")&&{id:"header_virtualeditions",route:"/virtual/virtualeditions"},e("classification-game")&&{id:"general_classificationGame",route:"/virtual/classificationGames"}]},admin:{name:"header_admin",pages:[{id:"load",route:"/admin/loadForm"},{id:"general_export",route:"/admin/exportForm"},{id:"fragment_delete",route:"/admin/fragment/list"},{id:"user_manage",route:"/admin/user/list"},{id:"virtual_editions_manage",route:"/admin/virtual/list"},{id:"twitter_manage",route:"/admin/tweets"}]}};const a=new CSSStyleSheet;a.replaceSync("* {\n    box-sizing: border-box;\n}\n\na:hover {\n    color: #0c4ef6;\n}\n\na {\n    text-decoration: none;\n    color: black;\n    cursor: pointer;\n}\n\n.navbar-default {\n    background-color: rgba(255, 255, 255, 0.8);\n    border-bottom: none;\n    border-color: #e7e7e7;\n}\n\n.ldod-navbar.navbar {\n    border-top: 10px solid #fc1b27;\n    font-family: 'Space-Mono';\n    font-weight: bold;\n    font-size: 14px;\n}\n\n.navbar {\n    position: relative;\n    min-height: 50px;\n    margin-bottom: 20px;\n    border: 1px solid transparent;\n}\n\n.navbar-fixed-bottom,\n.navbar-fixed-top {\n    position: fixed;\n    right: 0;\n    left: 0;\n    z-index: 1030;\n}\n\n.navbar-fixed-top {\n    top: 0;\n    border-width: 0 0 1px;\n}\n\n.container-fluid {\n    border-bottom: 1px solid #fc1b27;\n    padding-right: 15px;\n    padding-left: 15px;\n    margin-right: auto;\n    margin-left: auto;\n}\n\n.container-fluid::after,\n.container-fluid::before,\n.container::after,\n.container::before,\n.nav::after,\n.nav::before,\n.navbar-collapse::after,\n.navbar-collapse::before {\n    display: table;\n    content: ' ';\n}\n\n.container-fluid::after,\n.container::after {\n    clear: both;\n}\n\n.container {\n    padding-right: 15px;\n    padding-left: 15px;\n    margin-right: auto;\n    margin-left: auto;\n}\n\n.navbar-header {\n    float: none;\n}\n\n.navbar-brand {\n    float: left;\n    padding: 15px 15px;\n    line-height: 20px;\n    font-family: 'Work-Sans';\n    font-weight: 800;\n    font-size: 3rem;\n    padding-top: 20px;\n    padding-bottom: 22px;\n}\n\n.navbar-toggle {\n    position: relative;\n    float: right;\n    padding: 9px 10px;\n    background-color: transparent;\n    background-image: none;\n    border-radius: 4px;\n    border-color: #ddd;\n    border: none;\n    margin-top: 13px;\n    margin-bottom: 12px;\n    margin-right: -10px;\n}\n\n.navbar-toggle:hover .icon-bar {\n    background-color: #0c4ef6;\n}\n\nbutton {\n    cursor: pointer;\n    text-transform: none;\n}\n\n.icon-bar {\n    display: block;\n    width: 22px;\n    height: 3px;\n    border-radius: 1px;\n    background-color: black;\n}\n\n.icon-bar+.icon-bar {\n    margin-top: 5px;\n}\n\n.nav {\n    padding-left: 0;\n    margin-bottom: 0;\n    list-style: none;\n}\n\n.navbar-nav {\n    text-transform: uppercase;\n    margin: 7.5px -15px;\n}\n\n.navbar-nav-flex {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n}\n\n.nav>li {\n    position: relative;\n    display: block;\n}\n\n.nav>li>a {\n    position: relative;\n    display: block;\n    padding: 10px 15px;\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.navbar-nav>li>a {\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 20px;\n}\n\n.navbar-header .navbar-nav>li>a {\n    line-height: 32px;\n    padding-right: 15px;\n}\n\nli.nav-lang>a {\n    display: inline-block;\n}\n\n.navbar-nav>li>a:focus {\n    color: #fc1b27;\n}\n\n.navbar-nav>li>a:hover {\n    color: #0c4ef6;\n}\n\na.active {\n    color: #fc1b27;\n}\n\n.open>a:hover,\n.open>a:focus {\n    background-color: #e7e7e7;\n}\n\n.caret {\n    display: inline-block;\n    width: 0;\n    height: 0;\n    margin-left: 2px;\n    vertical-align: middle;\n    border-top: 4px dashed;\n    border-top: 4px solid\\9;\n    border-right: 4px solid transparent;\n    border-left: 4px solid transparent;\n}\n\n.dropdown-menu {\n    border-radius: 0;\n    border: none;\n    box-shadow: none;\n    background: none;\n    padding: 5px 0;\n    padding-top: 15px;\n    padding-bottom: 15px;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    z-index: 1000;\n    display: none;\n    float: left;\n    min-width: 160px;\n    margin: 2px 0 0;\n    margin-top: 0;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    font-size: 14px;\n    text-align: left;\n    list-style: none;\n}\n\n.open>.dropdown-menu {\n    display: block;\n}\n\n.dropdown-menu-bg {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 200vw;\n    -webkit-transform: translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform: translateX(-50%);\n    -o-transform: translateX(-50%);\n    transform: translateX(-50%);\n    background-color: rgba(255, 255, 255, 0.8);\n    z-index: -1;\n    border-top: 1px dashed #fc1b27;\n    border-bottom: 1px solid #fc1b27;\n}\n\n.dropdown-menu>li>a {\n    display: block;\n    padding: 3px 20px;\n    clear: both;\n    line-height: 1.42857143;\n    white-space: nowrap;\n    padding-left: 0;\n    padding-right: 0;\n    font-weight: inherit;\n}\n\nli#user-component.dropdown>a.dropdown-toggle {\n    color: #fc1b27;\n}\n\n.user-component .dropdown-menu {\n    background-color: white;\n    border: 1px solid #e71924;\n    margin-right: 15px;\n    padding-left: 15px;\n    padding-right: 15px;\n}\n\n@media (max-width: 767px) {\n    .navbar-collapse {\n        background-color: white;\n        border-bottom: 1px solid #fc1b27;\n        display: none;\n    }\n    .navbar-nav {\n        margin-left: 0;\n        margin-right: 0;\n    }\n    .navbar-nav-flex {\n        -webkit-box-orient: vertical;\n        -webkit-box-direction: normal;\n        -webkit-flex-direction: column;\n        -moz-box-orient: vertical;\n        -moz-box-direction: normal;\n        -ms-flex-direction: column;\n        flex-direction: column;\n    }\n    .navbar-collapse {\n        border-top: 1px solid transparent;\n        box-shadow: inset 0 1px 0 rgb(255 255 255 / 10%);\n        padding-right: 15px;\n        padding-left: 15px;\n        overflow-x: visible;\n        border-color: #e7e7e7;\n        margin-right: -15px;\n        margin-left: -15px;\n    }\n    .navbar-collapse[aria-expanded='true'] {\n        overflow: hidden;\n        display: block;\n    }\n    .dropdown-menu {\n        padding-top: 0;\n        padding-bottom: 0;\n    }\n    .open .dropdown-menu {\n        position: static;\n        float: none;\n        width: auto;\n        margin-top: 0;\n        background-color: transparent;\n        border: 0;\n        -webkit-box-shadow: none;\n        box-shadow: none;\n    }\n    .dropdown-menu .dropdown-menu-bg {\n        display: none;\n    }\n    .open .dropdown-menu>li>a {\n        line-height: 20px;\n        padding: 5px 15px 5px 15px;\n    }\n    .hidden-xs {\n        display: none;\n    }\n}\n\n@media (min-width: 768px) {\n    .navbar-fixed-top,\n    .navbar-fixed-bottom {\n        border-radius: 0;\n    }\n    .navbar>.container .navbar-brand,\n    .navbar>.container-fluid .navbar-brand {\n        margin-left: -15px;\n    }\n    .container-fluid>.navbar-header,\n    .container>.navbar-header {\n        margin-right: 0;\n        margin-left: 0;\n    }\n    .container {\n        width: 750px;\n    }\n    .navbar-toggle {\n        display: none;\n    }\n    .navbar-nav {\n        float: left;\n        margin: 0;\n    }\n    .navbar-nav>li {\n        float: left;\n    }\n    .navbar-nav>li>a {\n        padding-top: 15px;\n        padding-bottom: 15px;\n    }\n    .user-component {\n        float: right;\n        margin-right: -15px;\n    }\n    .user-component .dropdown-menu {\n        right: 0;\n        left: auto;\n    }\n    li#user-component.visible-xs {\n        display: none;\n    }\n}\n\n@media (min-width: 992px) {\n    .container {\n        width: 970px;\n    }\n}\n\n@media (min-width: 1200px) {\n    .container {\n        width: 1170px;\n    }\n}\n\n#admin[aria-hidden='true'] {\n    display: none;\n}\n\nli#user-component>a:hover {\n    color: #0c4ef6;\n}\n\nspan.caret {\n    margin-left: 8px;\n}");class o extends HTMLLIElement{static get observedAttributes(){return["language"]}get menuItems(){return this.items}get menuName(){return this.getAttribute("menu-name")}set menuName(n){this.setAttribute("menu-name",n)}connectedCallback(){this.render()}attributeChangedCallback(n,e,t){e!==t&&e&&(this.setDropDownMenuName(),this.setAnchorItemsNames())}disconnectedCallback(){}render(){this.classList.add("dropdown"),this.innerHTML=html`
      <a class="dropdown-toggle" data-toggle="dropdown"
        >${this.menuName}<span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <div class="dropdown-menu-bg"></div>
        ${this.menuItems.reduce(((n,{id:e,route:t,link:a,name:o})=>n.concat(html`
              <li>
                ${t?html`<a is="nav-to" to=${t} id=${e}>${o}</a>`:html`<a href=${a} target="_blank" id=${e}>${o}</a>`}
              </li>
            `)),"")}
      </ul>
    `}setDropDownMenuName(){const n=this.querySelector("li.dropdown>a"),e=n.querySelector("span");n.textContent=this.menuName,n.appendChild(e)}setAnchorItemsNames(){this.menuItems.forEach((({id:n,name:e})=>this.querySelectorAll(`li>a#${n}`).forEach((n=>n.textContent=e))))}getDrops(){return this.getRootNode().querySelectorAll(".dropdown")}}customElements.define("dropdown-menu",o,{extends:"li"});class i extends HTMLLIElement{constructor(){super()}get language(){return this.getAttribute("language")}connectedCallback(){this.render(),this.setActive()}render(){this.classList.add("nav-lang"),this.innerHTML=html`
      <a class="" id="pt">PT</a>
      <a class="" id="en">EN</a>
      <a class="" id="es">ES</a>
    `,Array.from(this.children).forEach((n=>n.addEventListener("click",this.updateLanguage)))}updateLanguage(){Array.from(this.parentNode.children).forEach((n=>n.classList.remove("active"))),this.classList.add("active"),this.getRootNode().host.setAttribute("language",this.id),this.dispatchEvent(new CustomEvent("ldod-language",{detail:{language:this.id},bubbles:!0,composed:!0}))}setActive(){this.querySelectorAll("li.nav-lang>a").forEach((n=>n.id===this.language&&n.classList.add("active")))}}customElements.define("lang-menu",i,{extends:"li"});const r=new CSSStyleSheet;window.html=String.raw;const s=async n=>(await function(n){switch(n){case"../../../resources/navbar/constants-en.js":return import("./constants-en-7c296223.js");case"../../../resources/navbar/constants-es.js":return import("./constants-es-abe7b6f2.js");case"../../../resources/navbar/constants-pt.js":return import("./constants-pt-b0208b9b.js");default:return new Promise((function(e,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+n)))}))}}(`../../../resources/navbar/constants-${n}.js`)).default;class d extends HTMLElement{constructor(){super();const n=this.attachShadow({mode:"open"});this.constants=void 0,this.user=void 0,n.adoptedStyleSheets=[r]}static get observedAttributes(){return["language"]}get language(){return this.getAttribute("language")}set language(n){this.setAttribute("language",n)}get token(){return this.getAttribute("token")}getUser(){return this.user}isAdmin(){return this.getUser()?.admin}async connectedCallback(){r.replaceSync(a),r.cssRules.length||(this.shadowRoot.adoptedStyleSheets=[a]),this.shadowRoot.addEventListener("ldod-user-event",this.onUserLogin),this.language=this.language,await this.setConstants(),this.render(),this.addDropdownEventListeners()}disconnectedCallback(){this.shadowRoot.removeEventListener("ldod-user-event",this.onUserLogin)}async attributeChangedCallback(n,e,t){e!==t&&t&&e&&"language"===n&&(await this.onLanguageChange(),this.componentsTextContextUpdate(),this.componentsNameUpdate(),this.componentsItemsUpdate(),this.componentsLanguageUpdate())}async onLanguageChange(){await this.setConstants()}componentsTextContextUpdate(){this.shadowRoot.querySelectorAll(".update-language").forEach((n=>n.textContent=this.constants[n.id]))}componentsNameUpdate(){this.shadowRoot.querySelectorAll("[menu-name]").forEach((n=>n.menuName=this.constants[this.getHeaders(n.id).name]))}componentsLanguageUpdate(){this.shadowRoot.querySelectorAll("[language]").forEach((n=>n.setAttribute("language",this.language)))}componentsItemsUpdate(){this.shadowRoot.querySelectorAll("[is=dropdown-menu]").forEach((n=>n.items=this.getItems(this.getHeaders(n.id).pages)))}render(){this.setInnerHTML(),this.shadowRoot.querySelector(".navbar-toggle").addEventListener("click",this.toggleEvent)}toggleEvent(){const n=this.getRootNode().querySelector(".navbar-collapse");n.ariaExpanded="true"===n.ariaExpanded?"false":"true"}onUserLogin({detail:{user:n}}){if(this.user!==n){this.user=n;this.querySelector("nav>div.container>div>ul>li#admin").ariaHidden=!n?.admin}}getHeaders(n){return t[n]}async setConstants(){this.constants=await s(this.language)}setInnerHTML(){const e=n(html`
        <nav
          role="navigation"
          class="ldod-navbar navbar-default navbar navbar-fixed-top"
        >
          <div class="container-fluid">
            <div class="container">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a
                  is="nav-to"
                  id="header_title"
                  to="/"
                  class="navbar-brand update-language"
                >
                  ${this.constants.header_title}
                </a>
                <ul class="nav navbar-nav user-component hidden-xs">
                  <li
                    id="user-component"
                    master
                    class="dropdown"
                    is="user-component"
                    language=${this.language}
                    token=${this.token}
                  ></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="container">
            <div class="navbar-collapse collapse" aria-expanded="false">
              <ul class="nav navbar-nav navbar-nav-flex">
                <li
                  id="user-component"
                  class="dropdown visible-xs"
                  is="user-component"
                  language=${this.language}
                  token=${this.token}
                ></li>
                <li is="lang-menu" language=${this.language}></li>
              </ul>
            </div>
          </div>
        </nav>
      `);this.appendDropdownMenus(e.querySelector("ul.navbar-nav-flex"),e.querySelector("li.visible-xs")),this.shadowRoot.appendChild(e)}appendDropdownMenus(e,a){Object.entries(t).forEach((([t,o])=>{if(!o)return;const{name:i,pages:r}=o,s=n(html`<li
        is="dropdown-menu"
        id=${t}
        language=${this.language}
        menu-name=${this.constants[i]}
        aria-hidden=${"admin"===t&&!this.isAdmin()}
      ></li>`);s.items=this.getItems(r),e.insertBefore(s,a)}))}getItems(n){return n.filter(Boolean).map((({id:n,route:e,link:t})=>({id:n,name:this.constants[n],route:e,link:t})))}getDropdownElements(){return this.shadowRoot.querySelectorAll(".dropdown")}addDropdownEventListeners(){this.getDropdownElements().forEach((n=>{this.bindHandlers(n),n.addEventListener("click",this.handleDropdownClick)}))}bindHandlers(n){n.handleClickNavbar=this.handleClickNavbar.bind(n),n.handleDocumentClick=this.handleDocumentClick.bind(n),n.removeDropdownEventListeners=this.removeDropdownEventListeners.bind(n)}handleDropdownClick(){if(l(this))return p(this);this.getRootNode().querySelectorAll(".dropdown").forEach((n=>p(n))),this.getRootNode().addEventListener("click",this.handleClickNavbar),document.addEventListener("click",this.handleDocumentClick),c(this)}handleClickNavbar(n){[...this.getRootNode().querySelectorAll("a.dropdown-toggle")].some((e=>e===n.target))||[...this.getRootNode().querySelectorAll("li.nav-lang>a")].some((e=>e===n.target))||(this.removeDropdownEventListeners(),p(this))}handleDocumentClick(n){n.target instanceof customElements.get("ldod-navbar")||(this.removeDropdownEventListeners(),p(this))}removeDropdownEventListeners(){this.getRootNode().removeEventListener("click",this.handleClickNavbar),document.removeEventListener("click",this.handleDocumentClick)}}customElements.define("ldod-navbar",d);const l=n=>n.classList.contains("open"),c=n=>n.classList.add("open"),p=n=>n.classList.remove("open");let u;const h=async()=>{u=await import("./Home-f2d72e9e.js")};var g={path:"/",mount:async(n,e)=>{u||await h(),u.mount(n,e)},unMount:async()=>{u||await h(),u.unMount()}};export{g as default};
