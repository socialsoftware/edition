import{createElement as s}from"http://localhost:9000/ldod-mfes/shared/vanilla-jsx.js";import{G as d,c as i,e as o,a as u}from"./constants.030263b8.js";import{s as g,e as r,l as m,a as c,b as h,c as p,d as f,f as y}from"./index.c7cd3be2.js";import"http://localhost:9000/ldod-mfes/shared/store.js";import"http://localhost:9000/ldod-mfes/shared/fetcher.js";import"http://localhost:9000/ldod-mfes/shared/router.js";const v="/assets/facebook.90cd4cda.svg",w="/assets/google.9bf7ecef.svg",C="/assets/linkedin.8f4fe4fa.svg",k="/assets/twitter.5d0007cf.svg";let n;function b(){const a=document.createElement("script");return a.src="https://accounts.google.com/gsi/client",a.addEventListener("load",S),a}function q(a,t){switch(n=t,a){case"google":document.head.appendChild(b());break}}const E=({credential:a})=>g("google",{accessToken:a}).then(t=>t&&r(n[t.message])).catch(t=>r(n[t.message],"error"));function S(){const a=window.google.accounts.id;a.initialize({...d,callback:E}),a.prompt()}class I extends HTMLElement{constructor(){super(),this.username="",this.password="",this.isValid=!0}get language(){return this.getAttribute("language")}static get observedAttributes(){return["language"]}async connectedCallback(){await this.setConstants(),this.appendChild(this.getComponent())}attributeChangedCallback(t,e,l){t==="language"&&e&&l!==e&&this.updateLanguage()}disconnectedCallback(){}setConstants=async()=>this.constants=await m(this.language);getConstants(t){return this.constants[t]}async updateLanguage(){await this.setConstants(),["[key]"].forEach(t=>this.querySelectorAll(t).forEach(e=>{if(e instanceof HTMLInputElement){e.placeholder=this.getConstants(e.getAttribute("key")),e.title=this.getConstants("required");return}e.textContent=this.getConstants(e.getAttribute("key"))})),c({language:this.language})}clearDataInputs(){this.querySelectorAll("input").forEach(t=>{t.value="",this[t.name]=""})}clearStyleInputs(){this.querySelectorAll(".form-control").forEach(t=>t.classList.remove("valid"))}checkInputs=()=>{const t=e=>this.querySelector(`input[name=${e}]`);["username","password"].forEach(e=>{if(!this[e].trim())return this.isValid=!1,h(t(e),this.getConstants("required"));p(t(e))})};handleSubmit=t=>{t.preventDefault(),this.checkInputs(),this.isValid&&f({username:this.username,password:this.password}).catch(e=>{console.error(e),e.status===500&&c({token:""})}),this.clearStyleInputs(),this.clearDataInputs(),this.isValid=!0};revealPassword=({target:t})=>{t.parentElement.querySelector("input[name=password]").type="text"};hidePassword=({target:t})=>{t.parentElement.querySelector("input[name=password]").type="password"};getComponent=()=>s("div",{class:"row"},s("div",{class:"login-form"},s("h2",{key:"signin-title"},this.getConstants("signin-title")),s("form",{role:"form",onSubmit:this.handleSubmit,class:"form"},s("div",{class:"col-md-offset-4 col-md-4"},s("div",{class:"form-control"},s("input",{key:"username",type:"text",autoComplete:"username",name:"username",value:this.username,onKeyUp:({target:{value:t}})=>this.username=t,placeholder:this.getConstants("username"),title:this.getConstants("required")}),s("img",{src:i,class:"icon-validation valid"}),s("img",{src:o,class:"icon-validation invalid"}),s("small",{key:"required"}))),s("div",{class:"col-md-offset-4 col-md-4"},s("div",{class:"form-control"},s("input",{key:"password",type:"password",autoComplete:"current-password",name:"password",value:this.password,onKeyUp:({target:{value:t}})=>this.password=t,placeholder:this.getConstants("password"),title:this.getConstants("required")}),s("img",{src:u,class:"icon",onMouseDown:this.revealPassword,onMouseUp:this.hidePassword}),s("img",{src:i,class:"icon-validation valid"}),s("img",{src:o,class:"icon-validation invalid"}),s("small",{key:"required"}))),s("div",{class:"col-md-offset-5 col-md-2"},s("button",{key:"sign-in",class:"btn-signin",type:"submit",style:{width:"100%"}},this.getConstants("sign-in")))),s("div",{style:{padding:"4px 16px"}},[["twitter",k],["google",w],["facebook",v],["linkedin",C]].map(([t,e])=>s("div",{class:"col-md-offset-5 col-md-2"},s("button",{class:`btn-signin social ${t}`,type:"button",onClick:()=>q(t,this.constants),style:{width:"100%"}},s("img",{src:e,class:"social-icon"}),y(t)))))),s("div",{class:"row"},s("a",{key:"signup",is:"nav-to",to:"/user/signup"},this.getConstants("signup")??"")))}!customElements.get("sign-in")&&customElements.define("sign-in",I);const P=(a,t)=>{document.querySelector(t).appendChild(s("sign-in",{language:a}))},T=()=>document.querySelector("sign-in")?.remove();export{P as mount,T as unMount};
