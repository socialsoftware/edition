import{createElement as e,createFragment as c}from"http://localhost:9000/ldod-mfes/shared/vanilla-jsx.js";import{A as r,b as m,P as u,E as d,c as i,e as n,a as h}from"./constants.030263b8.js";import{l as g,a as p,h as v,e as l,b as f,c as y}from"./index.148fe27f.js";import{navigateTo as C}from"http://localhost:9000/ldod-mfes/shared/router.js";import"http://localhost:9000/ldod-mfes/shared/store.js";import"http://localhost:9000/ldod-mfes/shared/fetcher.js";class k extends HTMLElement{constructor(){super(),this.isValid=!0,this.firstname={value:"",test:t=>r.test(t),message:()=>this.getConstants("req-alphabetic")},this.lastname={value:"",test:t=>r.test(t),message:()=>this.getConstants("req-alphabetic")},this.username={value:"",test:t=>m.test(t),message:()=>this.getConstants("req-alphanumeric")},this.password={value:"",test:t=>u.test(t),message:()=>this.getConstants("min-6")},this.email={value:"",test:t=>d.test(t),message:()=>this.getConstants("email-pattern")},this.conduct={value:!1,test:t=>t===!0,message:()=>this.getConstants("conduct-check")},this.socialMedia={value:""},this.socialId={value:""}}static get observedAttributes(){return["language"]}get language(){return this.getAttribute("language")}getState(t){return this[t]}getStateKeys(){return["username","firstname","lastname","password","email","socialMedia","socialId","conduct"]}getConstants(t){return this.constants[t]??t}importHistoryState(){this.getStateKeys().forEach(t=>{this[t].value=history.state?.[t]??""})}async connectedCallback(){await this.setConstants(),this.importHistoryState(),this.appendChild(this.getComponent())}attributeChangedCallback(t,s,a){t==="language"&&s&&a!==s&&this.updateLanguage()}disconnectedCallback(){}setConstants=async()=>this.constants=await g(this.language);async updateLanguage(){await this.setConstants(),["[key]"].forEach(t=>this.querySelectorAll(t).forEach(s=>{if(s instanceof HTMLInputElement){s.placeholder=this.getConstants(s.getAttribute("key")),s.title=this.getState(s.name).message();return}s.innerHTML=this.getConstants(s.getAttribute("key"))})),p({language:this.language})}handleSubmit=async t=>{t.preventDefault(),this.checkInputs(),this.isValid&&(await v({firstName:this.firstname.value,lastName:this.lastname.value,username:this.username.value,password:this.password.value,email:this.email.value,conduct:this.conduct.value,socialMediaId:this.socialId.value,socialMediaService:this.socialMedia.value}).then(({ok:s,message:a})=>{if(s)return l(this.getConstants(a)),console.log("test"),this.clearDataInputs(),C("/user/signin");l(a,"error")}).catch(({message:s})=>l(this.getConstants(s),"error")),this.clearStyleInputs()),this.isValid=!0};checkInputs=()=>{const t=s=>this.querySelector(`input[name=${s}]`);this.getStateKeys().forEach(s=>{if(!t(s))return;const a=this.getState(s);if(!a.test(a.value))return this.isValid=!1,f(t(s),a.message());y(t(s))})};clearDataInputs(){this.querySelectorAll("input").forEach(t=>{t.value="",this[t.name].value=""})}clearStyleInputs(){this.querySelectorAll(".form-control").forEach(t=>t.classList.remove("valid"))}revealPassword=({target:t})=>{t.parentElement.querySelector("input[name=password]").type="text"};hidePassword=({target:t})=>{t.parentElement.querySelector("input[name=password]").type="password"};getComponent(){return e(c,null,e("div",{class:"row"},e("h3",{key:"register"},this.getConstants("register"))),e("div",{class:"row"},e("form",{onSubmit:this.handleSubmit,role:"form",class:"form"},e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{key:"firstname",type:"text",autoComplete:"first-name",name:"firstname",value:this.firstname.value,onKeyUp:({target:{value:t}})=>this.firstname.value=t,placeholder:this.getConstants("firstname"),title:this.firstname.message()}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"req-alphabetic"}))),e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{key:"lastname",type:"text",autoComplete:"family-name",name:"lastname",value:this.lastname.value,onKeyUp:({target:{value:t}})=>this.lastname.value=t,placeholder:this.getConstants("lastname"),title:this.lastname.message()}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"req-alphabetic"}))),e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{key:"username",type:"text",autoComplete:"username",name:"username",value:this.username.value,onKeyUp:({target:{value:t}})=>this.username.value=t,placeholder:this.getConstants("username"),title:this.username.message()}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"req-alphanumeric"}))),e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{key:"password",type:"password",autoComplete:"current-password",name:"password",value:this.password.value,onKeyUp:({target:{value:t}})=>this.password.value=t,placeholder:this.getConstants("password"),title:this.password.message()}),e("img",{src:h,alt:"eye icon",class:"icon",onMouseDown:this.revealPassword,onMouseUp:this.hidePassword}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"min-6"}))),e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{key:"email",type:"text",autoComplete:"email",name:"email",value:this.email.value,onKeyUp:({target:{value:t}})=>this.email.value=t,placeholder:this.getConstants("email"),title:this.email.message()}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"email-pattern"}))),e("div",{class:"col-md-offset-4 col-md-4"},e("div",{class:"form-control"},e("input",{type:"checkbox",name:"conduct",value:this.conduct.value,onChange:({target:t})=>this.conduct.value=t.checked}),e("span",{key:"conduct"},this.getConstants("conduct")),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("img",{src:i,class:"icon-validation valid"}),e("img",{src:n,class:"icon-validation invalid"}),e("small",{key:"conduct-check"}))),e("div",{class:"col-sm-12"},e("button",{key:"register",class:"btn btn-primary",type:"submit"},this.getConstants("register"))))))}}!customElements.get("sign-up")&&customElements.define("sign-up",k);const A=(o,t)=>{document.querySelector(t).appendChild(e("sign-up",{language:o}))},M=()=>document.querySelector("sign-up")?.remove(),x="/signup";export{A as mount,x as path,M as unMount};
